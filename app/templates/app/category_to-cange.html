{% extends "base.html" %}
{% block title %}Управление категориями{% endblock %}
{% load static %}
{% block content %}
    <div class="main_container profile-main-container">

        {% if user.is_authenticated and perms.app.worker %}

            <div class="card profile-header-card category-management-header">
                <div class="profile-info-group">
                    <h2 class="profile-username-title">Управление категориями</h2>
                </div>
                <div class="profile-actions">
                    <a href="{% url 'create_new_category' %}" class="btn-profile btn-create-category">
                        ➕ Создать категорию
                    </a>
                    <a href="{% url 'admin_profile' %}" class="btn-profile">
                        ← В админ-панель
                    </a>
                </div>
            </div>

            <div class="card category-list-card">
                <h3 class="category-list-title">Существующие категории:</h3>

                {% if categories %}
                    <ul class="category-list-ul">
                        {% for category in categories %}
                            <li class="category-list-item">
                                <span class="category-name-text">{{ category.category_full_name }}</span>
                                <a href="{% url 'categories_delete_change' pk=category.pk %}" class="btn-action btn-category-edit">
                                    Изменить / Удалить
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="category-none-message">
                        Категории не найдены. Создайте новую категорию, чтобы начать работу.
                    </p>
                {% endif %}
            </div>

        {% else %}
            <div class="card guest-card admin-denied-card">
                 <h3 class="guest-title form-title-danger">Доступ запрещен</h3>
                 <p class="guest-text">У вас нет прав для управления категориями.</p>
                 <div class="guest-auth-actions">
                     <a href="{% url 'profile' %}" class="btn-guest-login">Вернуться в свой профиль</a>
                 </div>
            </div>
        {% endif %}
    </div>
{% endblock %}